# JPA_Shopping
SpringBoot + JPA 를 이용한 회원, 상품, 주문 도메인 개발 프로젝트


## 도메인 분석 설계

### 동작 화면
  
![image](https://github.com/SMin1620/JPA_Shopping/assets/81574795/59653b88-a12c-497c-82d0-dba484ff6919)

### 기능 목록
- 회원 기능
    - 회원 등록
    - 회원 조회
- 상품 조회
    - 상품 등록
    - 상품 수정
    - 상품 조회
- 주문 기능
    - 상품 주문
    - 주문 내역 조회
    - 주문 취소
- 기타 요구사항
    - 상품은 개조 관리가 필요하다.
    - 상품의 종류는 도서, 음반, 영화가 있다.
    - 상품을 카테고리로 구분할 수 있다.
    - 상품 주문 시 배송 정보를 입력할 수 있다.
 
### 도메인 모델과 테이블 설계
![image](https://github.com/SMin1620/JPA_Shopping/assets/81574795/7c7a88a8-40c4-47cd-a44c-942dd3fc3bd2)

- *회원, 주문, 상품의 관계:* 회원은 여러 상품을 주문할 수 있다. 그리고 한 번 주문할 때 여러 상품을 선택할 수 있으므로 주문과 상품은 다대다 관계다. 하지만 이런 다대다 관계는 관계형 데이터베이스는 물론이고 엔티 티에서도 거의 사용하지 않는다. 따라서 그림처럼 주문상품이라는 엔티티를 추가해서 다대다 관계를 일대 다, 다대일 관계로 풀어냈다.
- *상품 분류:* 상품은 도서, 음반, 영화로 구분되는데 상품이라는 공통 속성을 사용하므로 상속 구조로 표현했 다.

### 회원 엔티티 분석
![image](https://github.com/SMin1620/JPA_Shopping/assets/81574795/88285c1c-ceb5-4282-bad1-ab00270ee191)

### 최원 테이블 분석
![image](https://github.com/SMin1620/JPA_Shopping/assets/81574795/90d6d164-873a-474c-a087-44178dbf04cc)

### 연관관계 매핑 분석
- *회원과 주문:* 일대다 , 다대일의 양방향 관계다. 따라서 연관관계의 주인을 정해야 하는데, 외래 키가 있는 주 문을 연관관계의 주인으로 정하는 것이 좋다. 그러므로 Order.member 를 ORDERS.MEMBER_ID 외래 키와 매핑한다.
- *주문상품과 주문:* 다대일 양방향 관계다. 외래 키가 주문상품에 있으므로 주문상품이 연관관계의 주인이다. 그러므로 OrderItem.order 를 ORDER_ITEM.ORDER_ID 외래 키와 매핑한다.
- *주문상품과 상품:* 다대일 단방향 관계다. OrderItem.item 을 ORDER_ITEM.ITEM_ID 외래 키와 매핑한 다.
- *주문과 배송:* 일대일 양방향 관계다. Order.delivery 를 ORDERS.DELIVERY_ID 외래 키와 매핑한다.
- *카테고리와 상품:* @ManyToMany 를 사용해서 매핑한다.(실무에서 @ManyToMany는 사용하지 말자. 여기
서는 다대다 관계를 예제로 보여주기 위해 추가했을 뿐이다)
  

